<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://finger-bone.github.io/micro-service-crashcourse/24/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>服务网格 - 微服务速成笔记</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/color-brewer.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">微服务速成笔记</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Spring Cloud 微服务技术 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../01/" class="dropdown-item">回到 Spring</a>
</li>
                                    
<li>
    <a href="../02/" class="dropdown-item">回到 Java</a>
</li>
                                    
<li>
    <a href="../03/" class="dropdown-item">Consul 作为服务注册中心</a>
</li>
                                    
<li>
    <a href="../04/" class="dropdown-item">Consul 作为配置中心</a>
</li>
                                    
<li>
    <a href="../05/" class="dropdown-item">LoadBalancer</a>
</li>
                                    
<li>
    <a href="../06/" class="dropdown-item">Http Interface Client 与 OpenFeign</a>
</li>
                                    
<li>
    <a href="../07/" class="dropdown-item">Resilience4j 服务熔断和降级</a>
</li>
                                    
<li>
    <a href="../08/" class="dropdown-item">Resilience4j 限流</a>
</li>
                                    
<li>
    <a href="../09/" class="dropdown-item">Micrometer 监控</a>
</li>
                                    
<li>
    <a href="../10/" class="dropdown-item">Spring Gateway 网关</a>
</li>
                                    
<li>
    <a href="../11/" class="dropdown-item">Seata 分布式事务</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Spring 进阶内容 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../12/" class="dropdown-item">Reactor 框架</a>
</li>
                                    
<li>
    <a href="../13/" class="dropdown-item">Spring WebFlux</a>
</li>
                                    
<li>
    <a href="../14/" class="dropdown-item">Spring Security</a>
</li>
                                    
<li>
    <a href="../15/" class="dropdown-item">Spring Security OAuth2 认证以及 KeyCloak 用户服务</a>
</li>
                                    
<li>
    <a href="../16/" class="dropdown-item">Rabbit MQ 消息队列</a>
</li>
                                    
<li>
    <a href="../17/" class="dropdown-item">GraphQL</a>
</li>
                                    
<li>
    <a href="../18/" class="dropdown-item">gRPC</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">k8s 微服务技术 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../19/" class="dropdown-item">后端框架一览</a>
</li>
                                    
<li>
    <a href="../20/" class="dropdown-item">k8s 无状态服务基本部署</a>
</li>
                                    
<li>
    <a href="../21/" class="dropdown-item">helm 打包 istio 网关与 k8s 命令行工具</a>
</li>
                                    
<li>
    <a href="../22/" class="dropdown-item">k8s 无状态服务</a>
</li>
                                    
<li>
    <a href="../23/" class="dropdown-item">k8s 有状态服务</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">服务网格</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">中间件补充 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../25/" class="dropdown-item">Nacos 服务治理</a>
</li>
                                    
<li>
    <a href="../26/" class="dropdown-item">Sentinel</a>
</li>
                                    
<li>
    <a href="../27/" class="dropdown-item">kafka 高性能消息队列</a>
</li>
                                    
<li>
    <a href="../28/" class="dropdown-item">Redis</a>
</li>
                                    
<li>
    <a href="../29/" class="dropdown-item">OTel-LGTM</a>
</li>
                                    
<li>
    <a href="../30/" class="dropdown-item">Dubbo RPC</a>
</li>
                                    
<li>
    <a href="../31.md" class="dropdown-item">Nginx</a>
</li>
                                    
<li>
    <a href="../32.md" class="dropdown-item">Treafik</a>
</li>
                                    
<li>
    <a href="../33.md" class="dropdown-item">Citus</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../23/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../25/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#ch24" class="nav-link">微服务速成 Ch24 服务网格</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#_1" class="nav-link">服务网格的结构与原理</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#ambient" class="nav-link">Ambient 模式安装</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#ambient_1" class="nav-link">Ambient 应用部署</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_2" class="nav-link">应用监控</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#l4" class="nav-link">L4 鉴权</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#l7" class="nav-link">L7 鉴权</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_3" class="nav-link">流量管理</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_4" class="nav-link">熔断</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_5" class="nav-link">限流</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_6" class="nav-link">总结</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="ch24">微服务速成 Ch24 服务网格</h1>
<p>服务网格（Service Mesh）是一种基础设施层，用于处理服务之间的通信。它提供了一种透明的方式，使得服务之间的通信更加可靠、安全、高效。服务网格的目标是解耦服务的开发和运维，使得服务的开发者可以专注于业务逻辑，而运维者可以专注于服务的可观察性、安全性、性能等方面。</p>
<p>服务网格就类似于现实中的路网，其中有道路和一些必要建筑（如红绿灯、收费站等）。道路是服务之间的通信，而建筑是服务网格的功能。现在，作为城市的设计者，我们只需要在空格里放置一些建筑，就能建造出一个城市。同样的，作为软件开发者，我们只需要在服务网格中放置一些功能，就能构建出一个微服务系统。</p>
<p>服务网格又称为微服务基础设施，它是微服务架构的一部分。服务网格通常由两部分组成：数据平面（Data Plane）和控制平面（Control Plane）。数据平面负责服务之间的通信，控制平面负责配置、监控、管理数据平面。</p>
<p>服务网格本身也是一个微服务，它由一些微服务组成，这些微服务负责服务网格的各个功能。因此，部署它们是很复杂的。不过，前面我们介绍过 helm，helm 可以一次部署一整个 k8s 集群，因此也可以一次部署一个服务网格。</p>
<p>服务网格的具体使用根据提供商有些许不同。这里我们使用 istio 作为服务网格，它是一个开源的服务网格，由 Google、IBM 和 Lyft 共同开发。istio 提供了一些功能，如流量管理、安全、监控等。</p>
<p>前面我们在介绍网关时已经使用了 istio 的网关，当时在安装时我们事实上已经安装了 istio 服务网格的一部分。这一章我们系统地介绍一下 istio 的服务网格。</p>
<h2 id="_1">服务网格的结构与原理</h2>
<p>通过前面的学习，我们可以看到，微服务需要许多功能，而 k8s 和 Spring Cloud 区别是，前者是非侵入的，代码中感知不到 k8s 的存在，而后者是侵入的，代码中需要使用 Spring Cloud 的 API。</p>
<p>服务网格提供了微服务的大部分功能，不再需要自己搭建，其中主要有，</p>
<ul>
<li>安全认证和鉴权</li>
<li>负载均衡</li>
<li>流量管理</li>
<li>访问控制</li>
<li>链路追踪</li>
</ul>
<p>这涵盖了之前使用 Spring Cloud 讲到的大部分功能。微服务的其它功能，服务注册、配置与管理由 k8s 提供，分布式事务仍然需要额外的组件。</p>
<p>服务网格的这些功能通过代理实现。服务网格中的每个微服务都有一个代理，拦截所有的网络流浪，并负责服务之间的通信。这个代理是透明的，微服务不需要关心这个代理的存在。这个代理负责负载均衡、故障恢复、流量管理等。</p>
<p>代理可分为两种，L4 代理和 L7 代理，分别对应 OSI 模型的第四层和第七层。L4 代理功能比较少，但性能好，L7 代理功能多，但性能差。</p>
<p>服务网格可以在逻辑上分成两个平面，</p>
<ul>
<li>数据平面是一系列的网络代理，用来协调和监控微服务之间的通信。这些代理是部署在每个微服务之间的，它们负责服务之间的通信、负载均衡、故障恢复等。这些代理是透明的，微服务不需要关心这些代理的存在。</li>
<li>控制平面是一系列的微服务，用来管理数据平面。</li>
</ul>
<p>istio 的数据平面有两种工作模式，sidecar 和 ambient。sidecar 即侧载，是将代理部署在每个微服务的 Pod 中，这是 istio 的默认工作模式。ambient 即环境，是将代理部署在 Pod 的环境中，这是 istio 的另一种工作模式。</p>
<p>sidecar 模式默认使用 L7 代理，而为了性能，ambient 模式使用 L4 代理，但是可以手动把一部分代理切换到 L7 代理，来补全一些功能，例如链路追踪。</p>
<p>ambient 模式比较新，且性能好，但缺少一部分的功能。这里我们讲解 ambient 模式。</p>
<h2 id="ambient">Ambient 模式安装</h2>
<p>可以直接通过<code>istioctl install --set profile=ambient</code>来安装 istio，并安装好 Gaetway API，使用，</p>
<pre><code class="language-bash">kubectl get crd gateways.gateway.networking.k8s.io &amp;&gt; /dev/null || \
  { kubectl apply -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.1.0/standard-install.yaml; }
</code></pre>
<p>但是为了方便升级与维护，推荐使用 helm。</p>
<p>我们先启动一个新的集群，然后向 helm 添加一个 repo，</p>
<pre><code class="language-bash">helm repo add istio https://istio-release.storage.googleapis.com/charts
</code></pre>
<p>使用<code>helm repo update</code>来获取 Chart。</p>
<p>然后我们安装组件即可。与使用<code>istioctl</code>不同，helm 可以分组件安装，</p>
<p>注意，要先安装网关的 CRD，然后再安装以下内容。</p>
<p>基础组件，这里的<code>-n</code>是指定命名空间，<code>--create-namespace</code>是创建命名空间，<code>--wait</code>是等待安装完成。</p>
<pre><code class="language-bash">helm install istio-base istio/base -n istio-system --create-namespace --wait
</code></pre>
<p>CNI 组件，它负责检测属于 Ambient 网格的 Pod，并配置 Pod 和 ztunnel 节点代理（稍后将安装）之间的流量重定向。</p>
<pre><code class="language-bash">helm install istio-cni istio/cni -n istio-system --set profile=ambient --wait
</code></pre>
<p>控制平面，</p>
<pre><code class="language-bash">helm install istiod istio/istiod --namespace istio-system --set profile=ambient --wait
</code></pre>
<p>ZTunnel 代理，</p>
<pre><code class="language-bash">helm install ztunnel istio/ztunnel -n istio-system --wait
</code></pre>
<h2 id="ambient_1">Ambient 应用部署</h2>
<p>这里我们就不自己实现了，使用 istio 的示例应用 BookInfo，由四套不同语言实现的微服务组成。</p>
<p>使用 kubectl 部署，当然也可以打包成 Chart，这里为了方便就不打包了。</p>
<pre><code class="language-bash">kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.23/samples/bookinfo/platform/kube/bookinfo.yaml
kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.23/samples/bookinfo/platform/kube/bookinfo-versions.yaml
</code></pre>
<p>然后配置网关，</p>
<pre><code class="language-bash">kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.23/samples/bookinfo/gateway-api/bookinfo-gateway.yaml
</code></pre>
<p>现在，我们可以同以往一样访问网关的服务，而网关会将请求转发到对应的服务上。这些微服务并没有什么特殊性，也不需要额外操作。</p>
<p>然后我们就像之前一样访问网关，打开 minikube tunnel，访问<code>http://localhost/productpage</code>，就能看到页面。</p>
<p><img alt="BookInfo 页面" src="image.png" /></p>
<h2 id="_2">应用监控</h2>
<p>我们仍然需要安装 Prometheus 和 Grafana 来监控应用，以及使用 Kiali Dashboard。</p>
<pre><code class="language-bash">kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.23/samples/addons/prometheus.yaml
kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.23/samples/addons/grafana.yaml
kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.23/samples/addons/kiali.yaml
</code></pre>
<p>然后使用<code>istioctl dashboard kiali</code>来打开 Kiali Dashboard。</p>
<p>然后我们发送一些请求，</p>
<pre><code class="language-bash">for i in $(seq 1 100); do curl -s http://localhost:8080/productpage; done
</code></pre>
<p>然后我们能在 Kiali Dashboard 上看到请求的流量。</p>
<p><img alt="Kiali Board" src="image-1.png" /></p>
<p>但是，我们会发现一个问题：只有<code>productpage</code>服务有流量。这是因为，我们的微服务没有在数据平面注册，因此 istio 无法监控到这些服务。</p>
<p>我们可以直接把一整个 namespace 加入到 istio 的数据平面中，</p>
<pre><code class="language-bash">kubectl label namespace default istio.io/dataplane-mode=ambient
</code></pre>
<p>现在，我们就能看到所有的服务了。</p>
<p><img alt="Kiali Board" src="image-2.png" /></p>
<p>我们也可以在 Mesh 页面查看我们的服务网格。</p>
<p><img alt="Mesh 页面" src="image-3.png" /></p>
<h2 id="l4">L4 鉴权</h2>
<p>注意，这里的鉴权是以 Pod 为单位的，而不是用户。</p>
<p>下面的用户创建等过程在示例中已经有了，不需要我们操作，这里仅进行介绍。</p>
<p>鉴权是基于 ServiceAccount 的，</p>
<pre><code class="language-yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: bookinfo-productpage
  labels:
    account: productpage
</code></pre>
<p>要把 ServiceAccount 与 Pod 绑在一起。</p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: productpage-v1
  labels:
    app: productpage
    version: v1
spec:
  # ...
  template:
    metadata:
      # ...
    spec:
      serviceAccountName: bookinfo-productpage
      # ...
</code></pre>
<p>然后创建 AuthorizationPolicy，</p>
<pre><code class="language-yaml">apiVersion: security.istio.io/v1
kind: AuthorizationPolicy
metadata:
  name: productpage-viewer
  namespace: default
spec:
  selector:
    matchLabels:
      app: productpage
  action: ALLOW
  rules:
  - from:
    - source:
        principals:
        - cluster.local/ns/default/sa/bookinfo-gateway-istio
</code></pre>
<p>这里的 principal 是允许访问的 ServiceAccount。<code>bookinfo-gateway-istio</code>是 istio 默认的网关服务账户。principals 的格式是，</p>
<pre><code class="language-txt">{cluster-name}/ns/{namespace}/sa/{service-account}
</code></pre>
<p>cluster-name 是集群的名字，默认是<code>cluster.local</code>。ns 代表 namespace，namespace 填入 ServiceAccount 所在的 namespace。sa 代表 ServiceAccount，最后加上 ServiceAccount 的名字。</p>
<p>现在，只允许<code>bookinfo-gateway-istio</code>访问<code>productpage</code>服务，即必须通过网关。我们可以随意进入一个 Pod，运行<code>curl -s "http://productpage:9080/productpage"</code>，会发现无法访问。</p>
<h2 id="l7">L7 鉴权</h2>
<p>前面的 L4 鉴权只能在 OSI 第四层，即传输层，TCP/UDP 协议。而 L7 鉴权可以在 OSI 第七层，即应用层，HTTP 协议。这样就可以约束更多的内容，例如请求头、请求体等，因此可以支持 OAuth2，JWT 等等。</p>
<p>要在 Ambient 模式打开 L7 鉴权，需要把默认的 L4 Envoy 代理替换为 L7 Waypoint 代理。只要创建<code>waypoint</code>对象，<code>waypoint</code>是特殊的 Gateway。这个 waypoint 会代理所有通过当前 namespace 的流量。</p>
<pre><code class="language-yaml">apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  labels:
    istio.io/waypoint-for: service
  name: waypoint
spec:
  gatewayClassName: istio-waypoint
  listeners:
  - name: mesh
    port: 15008
    protocol: HBONE
</code></pre>
<p>这里的 listeners 我们不需要关心。在这个 listener 上，可以在 L4 基础上建立 L7 代理。</p>
<p>然后我们修改 Policy，</p>
<pre><code class="language-yaml">apiVersion: security.istio.io/v1
kind: AuthorizationPolicy
metadata:
  name: productpage-viewer
  namespace: default
spec:
  targetRefs:
  - kind: Service
    group: &quot;&quot;
    name: productpage
  action: ALLOW
  rules:
  - from:
    - source:
        principals:
        - cluster.local/ns/default/sa/sleep
    to:
    - operation:
        methods: [&quot;GET&quot;]
</code></pre>
<p>这里我们约束了只允许访问<code>productpage</code>服务的 GET 方法。如果使用，</p>
<pre><code class="language-bash">kubectl exec deploy/reviews-v1 -- curl -s http://productpage:9080/productpage
</code></pre>
<p>可以看到，access denied。</p>
<p>如果希望使用，例如，JWT 鉴权，可以使用<code>RequestAuthentication</code>对象，</p>
<pre><code class="language-yaml">apiVersion: security.istio.io/v1
kind: RequestAuthentication
metadata:
  name: &quot;jwt-example&quot;
  namespace: foo
spec:
  selector:
    matchLabels:
      app: httpbin
  jwtRules:
  - issuer: &quot;testing@secure.istio.io&quot;
    jwksUri: &quot;https://raw.githubusercontent.com/istio/istio/release-1.23/security/tools/jwt/samples/jwks.json&quot;
</code></pre>
<p>然后把之前的 principal 改成请求 principal。</p>
<pre><code class="language-yaml">apiVersion: security.istio.io/v1
kind: AuthorizationPolicy
metadata:
  name: require-jwt
  namespace: foo
spec:
  selector:
    matchLabels:
      app: httpbin
  action: ALLOW
  rules:
  - from:
    - source:
       requestPrincipals: [&quot;testing@secure.istio.io/testing@secure.istio.io&quot;]
</code></pre>
<p>这里我们就不再详细介绍了。</p>
<h2 id="_3">流量管理</h2>
<p>我们可以在 HTTPRoute 中配置流量管理，例如，</p>
<pre><code class="language-yaml">apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: reviews
spec:
  parentRefs:
  - group: &quot;&quot;
    kind: Service
    name: reviews
    port: 9080
  rules:
  - backendRefs:
    - name: reviews-v1
      port: 9080
      weight: 90
    - name: reviews-v2
      port: 9080
      weight: 10
</code></pre>
<p>这样就可以使得 90% 的流量访问 reviews-v1，10% 的流量访问 reviews-v2。</p>
<h2 id="_4">熔断</h2>
<p>可以通过<code>DestinationRule</code>来配置熔断，</p>
<pre><code class="language-yaml">apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  name: httpbin
spec:
  host: httpbin
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 1
      http:
        http1MaxPendingRequests: 1
        maxRequestsPerConnection: 1
    outlierDetection:
      consecutive5xxErrors: 1
      interval: 1s
      baseEjectionTime: 3m
      maxEjectionPercent: 100
</code></pre>
<p>这里的参数参考<a href="https://istio.io/latest/docs/tasks/traffic-management/circuit-breaking/">文档</a>即可。</p>
<h2 id="_5">限流</h2>
<p>限流只要修改 HTTPRoute，</p>
<pre><code class="language-yaml">apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: reviews
spec:
  parentRefs:
  - group: &quot;&quot;
    kind: Service
    name: reviews
    port: 9080
  rules:
  - backendRefs:
    - name: reviews-v2
      port: 9080
    timeouts:
      request: 500ms
</code></pre>
<h2 id="_6">总结</h2>
<p>目前为止，我们对 k8s 本身的介绍已经结束，我们已经介绍了 k8s 的基本概念，如何用 k8s 部署应用，如何用 helm 管理应用，以及如何用服务网格。</p>
<p>由此，本系列也就结束了。希望读者能够通过这个系列了解到 Spring Cloud，k8s 等微服务技术。</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
